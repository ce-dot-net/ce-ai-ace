{
  "code_snippet": "#!/usr/bin/env python3\n\"\"\"\nOffline Training Mode - ACE Research Paper Feature\n\nImplements multi-epoch offline training as described in Section 4.1:\n\"ACE optimizes contexts both offline (e.g., system prompt optimization)\nand online (e.g., test-time memory adaptation)\"\n\nMulti-epoch improves patterns by revisiting training data 5 times.\nAdds +2.6% improvement according to Table 3 in the paper.\n\"\"\"\n\nimport sys\nimport json\nimport sqlite3\nimport subprocess\nimport re\nimport hashlib\nfrom pathlib import Path\nfrom datetime import datetime\nfrom typing import List, Dict, Optional\n\n# Add scripts to path\nsys.path.insert(0, str(Path(__file__).parent))\n\n# Import epoch-manager.py (with hyphen in filename)\nimport importlib.util\n_spec = importlib.util.spec_from_file_location(\"epoch_manager\", Path(__file__).parent / \"epoch-manager.py\")\n_epoch_manager = importlib.util.module_from_spec(_spec)\n_spec.loader.exec_module(_epoch_manager)\n\nstart_epoch = _epoch_manager.start_epoch\ncomplete_epoch = _epoch_manager.complete_epoch\ntrack_pattern_evolution = _epoch_manager.track_pattern_evolution\ncache_training_data = _epoch_manager.cache_training_data\nget_training_data_for_epoch = _epoch_manager.get_training_data_for_epoch\nMAX_EPOCHS = _epoch_manager.MAX_EPOCHS\n\nPROJECT_ROOT = Path.cwd()\nDB_PATH = PROJECT_ROOT / '.ace-memory' / 'patterns.db'\nPLUGIN_ROOT = Path(__file__).parent.parent\n\ndef scan_codebase_for_training(source: str = 'all') -> List[Dict]:\n    \"\"\"\n    Scan codebase for training examples.\n\n    Args:\n        source: 'all', 'git-history', 'test-files', 'specs-history', or path\n\n    Returns:\n        List of training examples\n    \"\"\"\n    training_data = []\n\n    if source == 'all' or source == 'test-files':\n        # Scan test files\n        test_patterns = ['**/*test*.py', '**/*test*.js', '**/*test*.ts', '**/*.spec.js', '**/*.spec.ts']\n        for pattern in test_patterns:\n            for file_path in PROJECT_ROOT.glob(pattern):\n                if file_path.is_file() and file_path.stat().st_siz",
  "full_code_length": 17314,
  "file_path": "plugins/ace-orchestration/scripts/offline-training.py",
  "language": "python",
  "training_mode": "offline",
  "request_id": "offline-training-53905f21"
}