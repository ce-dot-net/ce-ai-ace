{
  "code_snippet": "\"\"\"\nTests for ACE Research Paper Compliance\n\nThese tests validate that our implementation matches the ACE research paper\narchitecture as described in arXiv:2510.04618 (Stanford/SambaNova/UC Berkeley).\n\nCRITICAL: If these tests fail, it means we've deviated from the research paper!\n\nKey Research Paper Requirements:\n1. Generator \u2192 Reflector \u2192 Curator architecture\n2. Reflector DISCOVERS patterns (no pre-detection!)\n3. Curator merges at 85% similarity threshold\n4. Curator prunes at 30% confidence threshold after 10 observations\n5. Confidence = successes / observations\n6. Graceful degradation when Reflector fails\n7. Iterative refinement (max 5 rounds, <5% improvement stops)\n\"\"\"\n\nimport pytest\nimport sqlite3\nfrom pathlib import Path\nfrom ace_test_helper import ACETestHelper\n\n\n@pytest.fixture\ndef ace_helper(plugin_root, temp_project, claude_env):\n    \"\"\"Create ACE test helper instance.\"\"\"\n    return ACETestHelper(plugin_root, temp_project, claude_env)\n\n\n# ==============================================================================\n# CRITICAL TEST 1: No Hardcoded Pattern Detection\n# ==============================================================================\n\n@pytest.mark.unit\ndef test_no_hardcoded_patterns_in_ace_cycle(plugin_root):\n    \"\"\"\n    RESEARCH PAPER COMPLIANCE: Reflector must DISCOVER patterns dynamically.\n\n    The research paper explicitly states patterns are discovered by the\n    Reflector agent analyzing code, NOT matched against predefined templates.\n\n    FAIL MEANS: We've violated the core ACE architecture!\n    \"\"\"\n    ace_cycle_path = plugin_root / 'scripts' / 'ace-cycle.py'\n    content = ace_cycle_path.read_text()\n\n    # Verify no hardcoded PATTERNS array\n    assert 'PATTERNS = [' not in content, \\\n        \"CRITICAL: Found hardcoded PATTERNS array! This violates ACE paper architecture.\"\n\n    # Verify comment acknowledges this\n    assert 'NO pre-detection' in content or 'NO hardcoded' in content, \\\n        \"Missing documentation about no pre-detection r",
  "full_code_length": 15250,
  "file_path": "plugins/ace-orchestration/tests/test_ace_research_compliance.py",
  "language": "python",
  "training_mode": "offline",
  "request_id": "test_ace_research_compliance-ad895009"
}