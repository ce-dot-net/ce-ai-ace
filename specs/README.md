# ACE Playbooks (spec-kit Format)

This directory contains human-readable, version-controlled playbooks generated by ACE (Agentic Context Engineering).

## ğŸ“ Structure

```
specs/
â”œâ”€â”€ memory/
â”‚   â””â”€â”€ constitution.md          # High-confidence principles (â‰¥70%)
â””â”€â”€ playbooks/
    â”œâ”€â”€ 001-python-io/
    â”‚   â”œâ”€â”€ spec.md              # Pattern definition
    â”‚   â”œâ”€â”€ plan.md              # Technical approach
    â”‚   â””â”€â”€ insights.md          # Reflector analysis
    â”œâ”€â”€ 002-python-strings/
    â””â”€â”€ 003-typescript-typing/
```

## ğŸ¯ What Are Playbooks?

Playbooks are **learned coding patterns** that ACE automatically discovers from your codebase:

- **Detected** by analyzing your code (AST + regex)
- **Validated** through test results and execution feedback
- **Curated** using research-proven algorithms (85% similarity threshold)
- **Evolved** through multi-epoch training and refinement

## ğŸ“– File Types

### `spec.md` - Pattern Definition
Contains the pattern overview with YAML frontmatter:
- Pattern ID and metadata
- Description and statistics
- When to use/avoid
- Confidence score and observations

### `plan.md` - Technical Approach
Describes how to apply the pattern:
- Implementation approach
- Success criteria
- Latest insights from Reflector
- Examples and best practices

### `insights.md` - Reflector Analysis
Historical analysis from ACE's Reflector agent:
- Real-world usage insights
- Common mistakes
- Effectiveness analysis
- Recommendations for improvement

## ğŸ”„ How Playbooks Evolve

1. **You code** â†’ ACE detects patterns
2. **Tests run** â†’ ACE analyzes effectiveness
3. **Reflector analyzes** â†’ Insights generated
4. **Curator merges** â†’ Playbooks updated
5. **Git commits** â†’ History preserved

## ğŸ“Š Constitution

`memory/constitution.md` contains **high-confidence principles** (â‰¥70% confidence) that represent your codebase's core coding standards.

Think of it as your team's automatically-learned style guide.

## ğŸ” Finding Patterns

### By ID
Each playbook has a unique ID (e.g., `py-004`):
```bash
# Find by ID
grep -r "pattern_id: py-004" specs/playbooks/
```

### By Domain
Patterns are organized by domain:
```bash
# List all python-io patterns
ls specs/playbooks/*python-io*/
```

### By Language
```bash
# Find all Python patterns
grep -r "language: python" specs/playbooks/*/spec.md
```

## ğŸš€ Usage

### Reading Playbooks
Playbooks are human-readable markdown files:
```bash
# Read a pattern
cat specs/playbooks/001-python-io/spec.md

# Read constitution
cat specs/memory/constitution.md
```

### Context Injection
ACE automatically injects relevant playbooks into agent context based on the file you're editing.

### Version Control
**These files are committed to git!**

This enables:
- Team-wide pattern sharing
- Historical pattern evolution
- Cross-machine synchronization
- Rollback capabilities
- Git-based offline training

## ğŸ§ª Confidence Levels

- **â‰¥70%**: High-confidence (included in constitution)
- **30-70%**: Medium-confidence (under validation)
- **<30%**: Low-confidence (may be pruned)

## ğŸ“ Research Background

Based on:
**"Agentic Context Engineering: Evolving Contexts for Self-Improving Language Models"**
- [arXiv:2510.04618](https://arxiv.org/abs/2510.04618)
- Stanford University, SambaNova Systems, UC Berkeley

### Key Innovations
- **Incremental delta updates** prevent context collapse
- **Semantic embeddings** (85% similarity threshold)
- **Deterministic curation** (no LLM variance)
- **Multi-epoch training** (+2.6% improvement)

## ğŸ’¡ Commands

```bash
# View statistics
/ace-status

# List patterns
/ace-patterns [domain] [min-confidence]

# Export patterns
/ace-export-speckit 001-python-io

# Force reflection
/ace-force-reflect [file]

# Run offline training
/ace-train-offline
```

## ğŸ”— Related

- **SQLite Database**: `.ace-memory/patterns.db` (learning engine, gitignored)
- **Legacy Format**: `CLAUDE.md` (optional, for backward compatibility)
- **Pattern Detection**: `scripts/serena-pattern-detector.py`
- **Generator**: `scripts/generate-speckit-playbook.py`

## ğŸ¤ Contributing

Playbooks are **auto-generated** from learned patterns. To improve them:

1. **Write better code** â†’ ACE learns better patterns
2. **Write tests** â†’ Patterns get validated
3. **Use patterns consistently** â†’ Confidence increases
4. **Review PRs** â†’ Catch pattern changes before merging

## ğŸ“š Learn More

- [ACE Implementation Guide](../docs/ACE_IMPLEMENTATION_GUIDE.md)
- [ACE Research Summary](../docs/ACE_RESEARCH.md)
- [Main README](../README.md)

---

*Auto-maintained by ACE (Agentic Context Engineering)*
*This directory represents your codebase's learned wisdom*
